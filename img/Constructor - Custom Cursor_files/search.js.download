"use strict";var locale=$.cookie("locale"),$vartypeahead=$(".typeahead"),responseList={},CC_Query="";locale||(locale="en",$.cookie("locale",locale));var settings={searchLink:"/"+locale+"/search"};$.fn.pressEnter=function(e){return this.each(function(){$(this).bind("enterPress",e),$(this).keyup(function(e){13==e.keyCode&&$(this).trigger("enterPress"),27==e.keyCode&&$("a.menu-search-close").click()})})},$vartypeahead.pressEnter(function(){window.location.href=settings.searchLink+"/"+$(this).val().toLowerCase()+"?term="+$(this).val().toLowerCase()}),$("#searchInput").pressEnter(function(){window.location.href=settings.searchLink+"/"+$(this).val().toLowerCase()+"?term="+$(this).val().toLowerCase()});var engine=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{wildcard:"%QUERY",url:settings.searchLink,limit:8,transform:function(e){return responseList=e,e},filter:function(e){var t=[];return responseList=e,e.items&&($.each(e.items,function(){var e=$(this)[0];t.push(e)}),t.length,$("#quickLinks").hide()),t},prepare:function(e,t){return CC_Query=e,t.type="POST",t.data={query:e,beta:!0},t}}});engine.initialize(),$vartypeahead.typeahead({hint:!0,minLength:1,highlight:!0,limit:10,menu:$("ul#result")},{menu:$("#result"),templates:{empty:["<li>Nothing found </li>"],header:[""],suggestion:function(e){return 1==e.type?'<li class="text-left item-search">\n                                <a style="display: inline-block !important;" class="link-collection" href="'+e.collection.link+'">'+e.collection.name+'</a>\n                                 &#x2192;\n                                 <a class="link-pack" style="display: inline-block !important;" href="'+e.link+'">'+e.name+"</a>\n                            </li>":'<li class="item-search" >\n                                <a style="display: inline-block !important;" class="link-collection" href="'+e.link+'">\n                                    '+e.name+"\n                                </a>\n                            </li>"},footer:function(e){return'<li class="text-right" style="padding: 7px 15px 0px">\n                    <a id="showMoreSearch"  href="'+settings.searchLink+"/"+e.query+"?term="+e.query+'"> Show All ('+responseList.total+")</a>\n                    </li>"}},cache:!0,name:"name",limit:50,displayKey:"name",source:engine.ttAdapter()}),$vartypeahead.bind("typeahead:selected",function(){}).bind("typeahead:render",function(){Array.prototype.slice.call(arguments,1)});